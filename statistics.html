<!DOCTYPE html>
<html>
	<head>
		<!--Code written by Shangzhen Yang-->
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">
		<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,viewport-fit=cover">
		<meta name="theme-color" content="#0066cc">
		<meta name="renderer" content="webkit">
		<link href="css/mui.min.css" rel="stylesheet">
		<link href="css/general.css" rel="stylesheet">
	</head>
	<body>
		<header class="mui-bar mui-bar-nav"></header>
		<div class="mui-content">
			<textarea rows="10"></textarea>
			<button type="button" class="mui-btn mui-btn-blue mui-btn-block"></button>
			<ul class="menu" style="margin-top:20px">
				<li id="Add" class="menu"></li>
				<li id="Clear" class="menu"></li>
			</ul>
			<fieldset style="margin-top:20px">
				<div class="mui-input-row">
					<label id="CountLabel"></label>
					<input id="Count" type="text">
				</div>
				<div class="mui-input-row">
					<label id="AverageLabel"></label>
					<input id="Average" type="text">
				</div>
				<div class="mui-input-row">
					<label id="SumLabel"></label>
					<input id="Sum" type="text">
				</div>
			</fieldset>
		</div>
		<script src="js/check.js"></script>
		<!--[if !IE]><!-->
		<script src="js/mui.min.js"></script>
		<script src="js/general.js"></script>
		<script type="text/javascript">
			function add(){
				showPrompt([
					"Enter a number",
					"输入一个数字"
				],[
					"Add",
					"添加"
				],function(e){
					const numSplit=document.getElementsByTagName("textarea")[0].value.split("\n")
					if(numSplit[numSplit.length-1]!=""){
						document.getElementsByTagName("textarea")[0].value+="\n"
					}
					document.getElementsByTagName("textarea")[0].value+=e
				})
			}
			function calculate(){
				const num=document.getElementsByTagName("textarea")[0].value
				if(num!=""&&num!=null){
					const numSplit=num.split("\n")
					let sumValue=0
					document.getElementById("Count").value=numSplit.length
					for(let i=0;i<numSplit.length;i++){
						sumValue+=numSplit[i]*1
					}
					document.getElementById("Average").value=sumValue/numSplit.length
					document.getElementById("Sum").value=sumValue
				}else{
					add()
				}
			}
			function clear(){
				document.getElementsByTagName("textarea")[0].value=""
				document.getElementById("Count").value=""
				document.getElementById("Average").value=""
				document.getElementById("Sum").value=""
			}
			function resultOnInput(){
				if(document.getElementsByTagName("textarea")[0].value==""){
					clear()
				}else{
					calculate()
				}
			}
			document.getElementsByTagName("button")[0].onclick=calculate
			document.getElementById("Add").onclick=add
			document.getElementById("Clear").onclick=clear
			document.getElementById("Count").oninput=resultOnInput
			document.getElementById("Average").oninput=resultOnInput
			document.getElementById("Sum").oninput=resultOnInput
			switch(language){
				case "SimplifiedChinese":
					document.title="计算器"
					document.getElementsByTagName("textarea")[0].placeholder="输入数字"
					document.getElementsByTagName("button")[0].innerText="计算"
					document.getElementById("Add").innerText="添加"
					document.getElementById("Clear").innerText="清空"
					document.getElementById("CountLabel").innerText="计数"
					document.getElementById("AverageLabel").innerText="平均值"
					document.getElementById("SumLabel").innerText="求和"
					break
				default:
					document.title="Calculator"
					document.getElementsByTagName("textarea")[0].placeholder="Enter numbers"
					document.getElementsByTagName("button")[0].innerText="Calculate"
					document.getElementById("Add").innerText="Add"
					document.getElementById("Clear").innerText="Clear"
					document.getElementById("CountLabel").innerText="Count"
					document.getElementById("AverageLabel").innerText="Average"
					document.getElementById("SumLabel").innerText="Sum"
					break
			}
			document.getElementsByClassName("mui-title")[0].innerText=document.title
		</script>
		<!--<![endif]-->
	</body>
</html>