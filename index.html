<!DOCTYPE html>
<html>
	<head>
		<!--Code written by Shangzhen Yang-->
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7">
		<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,viewport-fit=cover">
		<meta name="theme-color" content="#0066cc">
		<meta name="renderer" content="webkit">
		<title>RTH Toolbox</title>
		<link href="unpackage/res/icons/512x512.png" rel="apple-touch-icon">
		<link href="css/mui.min.css" rel="stylesheet">
		<link href="css/general.css" rel="stylesheet">
		<style>
			html{height:100%}
			body{
				background:linear-gradient(#0066CC,#004488);
				background-attachment:fixed;
				background-color:#004488;
				background-position:center center;
				background-repeat:no-repeat;
				background-size:cover;
				color:white;
				font-size:15px;
			}
			.drag{
				height:85px;
				left:0px;
				position:fixed;
				top:0px;
				width:100%;
				-webkit-app-region:drag;
			}
			.icon{
				left:40px;
				position:absolute;
				top:65px;
				-webkit-app-region:no-drag;
			}
			.home-title{
				cursor:default;
				font-size:20px;
				left:180px;
				position:absolute;
				top:105px;
				width:calc(100% - 260px);
			}
			.menu{
				height:calc(100% - 250px);
				left:0px;
				overflow:auto;
				position:absolute;
				top:195px;
				width:calc(100% - 40px);
			}
			li{
				border-bottom:1px solid #0066CC;
				color:white;
				cursor:default;
				overflow:hidden;
				padding:11px 15px;
			}
			li:first-child{border-top:1px solid #0066CC}
			li:active{
				background-color:white;
				border-radius:5px;
				color:#0066CC;
			}
			.bottom{
				border-top:1px solid #0066CC;
				bottom:0px;
				height:55px;
				position:absolute;
				width:100%;
			}
			.more{
				bottom:15px;
				color:white;
				left:15px;
				position:absolute;
			}
			.get{
				bottom:10px;
				left:55px;
				position:absolute;
				right:55px;
				text-align:center;
				width:calc(100% - 110px);
			}
			.settings{
				bottom:15px;
				color:white;
				position:absolute;
				right:15px;
			}
			.mui-table-view-cell:active{color:#0066CC}
		</style>
	</head>
	<body>
		<div class="drag"></div>
		<div class="win" style="display:none">
			<div style="right:80px" onclick="require('electron').remote.getCurrentWindow().minimize()">-</div>
			<div style="right:40px" onclick="maximize()">+</div>
			<div style="right:0px" onclick="window.close()">×</div>
		</div>
		<div class="icon">
			<a href="javascript:if(localStorage.getItem('Recent')!=null){openWindow(localStorage.getItem('Recent'))}">
				<img src="img/icon.png" width="100px" style="border-radius:25%">
			</a>
		</div>
		<div class="home-title"></div>
		<div class="menu">
			<ul>
				<li onclick="openWindow('wordlist')" id="WordList"></li>
				<li onclick="openWindow('timer')" id="Timer"></li>
				<li onclick="openWindow('calculator')" id="Calculator"></li>
				<li onclick="openWindow('chatbot')" id="Chatbot"></li>
				<li onclick="openWindow('randomnumber')" id="RandomNumber"></li>
				<li onclick="openWindow('search')" id="Search"></li>
				<li onclick="openWindow('texteditor')" id="TextEditor"></li>
			</ul>
		</div>
		<div class="bottom">
			<a class="mui-icon mui-icon-more more" href="javascript:more()"></a>
			<button class="mui-btn mui-btn-blue get" style="display:none" onclick="getToolbox()"></button>
			<a class="mui-icon mui-icon-settings settings" href="javascript:openWindow('settings')"></a>
		</div>
		<!--[if IE]>
			<script type="text/javascript">
				window.location.href="http://t.rths.tk/web/toolbox/download.html?time="+(new Date).getTime()
			</script>
		<![endif]-->
		<!--[if !IE]><!-->
		<script src="js/mui.min.js"></script>
		<script src="js/general.js"></script>
		<script type="text/javascript">
			var back,menu
			if(isPlus()){
				function plusReady(){
					plus.navigator.setStatusBarBackground("#0066CC")
					plus.navigator.setStatusBarStyle("light")
					if(isAndroid()){
						var wgtVer
						plus.runtime.getProperty(plus.runtime.appid,function(inf){wgtVer=inf.version})
						request("http://t.rths.tk/web/toolbox/update/check.php",function(newVer){if(wgtVer&&newVer&&(wgtVer!=newVer)){plus.downloader.createDownload("http://t.rths.tk/web/toolbox/update/H58039057.wgt",{filename:"_doc/update/"},function(d,status){if(status==200){plus.runtime.install(d.filename)}}).start()}})
					}else if(!isOnline()){
						plus.webview.create("about.html","about",{"popGesture":"hide"})
						plus.webview.create("calculator.html","calculator",{"popGesture":"hide"})
						plus.webview.create("chatbot.html","chatbot",{"popGesture":"hide"})
						plus.webview.create("currency.html","currency",{"popGesture":"hide"})
						plus.webview.create("date.html","date",{"popGesture":"hide"})
						plus.webview.create("equation12.html","equation12",{"popGesture":"hide"})
						plus.webview.create("equation21.html","equation21",{"popGesture":"hide"})
						plus.webview.create("equation31.html","equation31",{"popGesture":"hide"})
						plus.webview.create("findlinearfunction.html","findlinearfunction",{"popGesture":"hide"})
						plus.webview.create("findquadraticfunction.html","findquadraticfunction",{"popGesture":"hide"})
						plus.webview.create("mole.html","mole",{"popGesture":"hide"})
						plus.webview.create("quadraticfunction.html","quadraticfunction",{"popGesture":"hide"})
						plus.webview.create("randomnumber.html","randomnumber",{"popGesture":"hide"})
						plus.webview.create("search.html","search",{"popGesture":"hide"})
						plus.webview.create("settings.html","settings",{"popGesture":"hide"})
						plus.webview.create("statistics.html","statistics",{"popGesture":"hide"})
						plus.webview.create("texteditor.html","texteditor",{"popGesture":"hide"})
						plus.webview.create("timer.html","timer",{"popGesture":"hide"})
						plus.webview.create("wordlist.html","wordlist",{"popGesture":"hide"})
						if(plus.runtime.launcher=="shortcut"){
							var cmd=JSON.parse(plus.runtime.arguments)
							var type=cmd&&cmd.type
							switch(type){
								case "wordlist":
									openWindow("wordlist")
									break
								case "timer":
									openWindow("timer")
									break
								case "calculator":
									openWindow("calculator")
									break
								case "search":
									openWindow("search")
									break
								case "about":
									openWindow("about")
									break
								default:break
							}
						}
					}
				}
				if(window.plus){plusReady()}
				else{document.addEventListener("plusready",plusReady,false)}
			}else if(!isApp()){
				document.getElementsByClassName("icon")[0].style.top="45px"
				document.getElementsByClassName("home-title")[0].style.top="85px"
				document.getElementsByClassName("menu")[0].style.top="175px"
				document.getElementsByClassName("menu")[0].style.height="calc(100% - 230px)"
				document.getElementsByClassName("get")[0].style.display=""
			}
			if(language=="SimplifiedChinese"){
				document.title="RTH 工具箱"
				document.getElementsByClassName("home-title")[0].innerText="工具箱"
				document.getElementById("WordList").innerText="单词表"
				document.getElementById("Timer").innerText="计时器"
				document.getElementById("Calculator").innerText="计算器"
				document.getElementById("Chatbot").innerText="聊天机器人"
				document.getElementById("RandomNumber").innerText="随机抽号"
				document.getElementById("Search").innerText="搜索"
				document.getElementById("TextEditor").innerText="文本编辑器"
				back="返回"
				document.getElementsByClassName("get")[0].innerText="下载 RTH 工具箱"
			}else{
				document.getElementsByClassName("home-title")[0].innerText="Toolbox"
				document.getElementById("WordList").innerText="Word List"
				document.getElementById("Timer").innerText="Timer"
				document.getElementById("Calculator").innerText="Calculator"
				document.getElementById("Chatbot").innerText="Chatbot"
				document.getElementById("RandomNumber").innerText="Random Number"
				document.getElementById("Search").innerText="Search"
				document.getElementById("TextEditor").innerText="Text Editor"
				back="Back"
				document.getElementsByClassName("get")[0].innerText="Get RTH Toolbox"
			}
			if(!navigator.onLine){document.getElementsByClassName("more")[0].style.display="none"}
			else if(window.location.search.indexOf("more=1")!=-1){
				more()
				document.title="RTH"
				document.getElementsByClassName("home-title")[0].innerText="RTH"
			}
			onResize()
			if(isAndroidApp()&&!isOnline()){
				mui.init({preloadPages:[
					{url:"about.html",id:"about"},
					{url:"calculator.html",id:"calculator"},
					{url:"chatbot.html",id:"chatbot"},
					{url:"currency.html",id:"currency"},
					{url:"date.html",id:"date"},
					{url:"equation12.html",id:"equation12"},
					{url:"equation21.html",id:"equation21"},
					{url:"equation31.html",id:"equation31"},
					{url:"findlinearfunction.html",id:"findlinearfunction"},
					{url:"findquadraticfunction.html",id:"findquadraticfunction"},
					{url:"mole.html",id:"mole"},
					{url:"quadraticfunction.html",id:"quadraticfunction"},
					{url:"randomnumber.html",id:"randomnumber"},
					{url:"search.html",id:"search"},
					{url:"settings.html",id:"settings"},
					{url:"statistics.html",id:"statistics"},
					{url:"texteditor.html",id:"texteditor"},
					{url:"timer.html",id:"timer"},
					{url:"wordlist.html",id:"wordlist"}
				],preloadLimit:19,swipeBack:false})
			}else{mui.init({swipeBack:false})}
			window.onresize=onResize
			if(isElectron()){
				const{remote}=require("electron")
				let path
				if(process.platform=="darwin"){path=remote.getGlobal("sharedObj").path}
				else if(process.platform=="win32"){path=remote.getGlobal("sharedObj").path[1]}
				if(path){
					let list
					if(path.indexOf("://")!=-1){list=searchURL("list",path.replace("rthtoolbox://",""))}
					else{list=require("fs").readFileSync(path,"utf8").replace(/<br \/>/g,"")}
					if(list){
						localStorage.setItem("WordList",list)
						localStorage.removeItem("WordListCurrentItem")
						openWindow("wordlist")
					}
				}else{
					const package=require("./package.json")
					request("http://t.rths.tk/package.json",function(e){
						const Json=JSON.parse(e)
						if(package.version!=Json.version){window.location.href="electron/update.html"}
					})
				}
			}
			function onResize(){
				if(document.documentElement.clientWidth>500){document.getElementsByClassName("home-title")[0].style.textAlign="left"}
				else{document.getElementsByClassName("home-title")[0].style.textAlign="center"}
			}
			function more(){
				request("http://t.rths.tk/web/toolbox/more_"+language+".html",function(e){
					document.getElementsByClassName("more")[0].style.display="none"
					menu=document.getElementsByTagName("ul")[0].innerHTML
					document.getElementsByTagName("ul")[0].innerHTML="<li onclick='Back()'>"+back+"</li>"+e
				})
			}
			function Back(){
				if(window.history.length>1&&window.location.search.indexOf("more=1")!=-1){history.go(-1)}
				else{
					document.getElementsByTagName("ul")[0].innerHTML=menu
					document.getElementsByClassName("more")[0].style.display=""
				}
			}
		</script>
		<!--<![endif]-->
	</body>
</html>