<!DOCTYPE html>
<html>
	<head>
		<!--Code written by Shangzhen Yang-->
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,viewport-fit=cover"/>
		<meta name="theme-color" content="#0066cc"/>
		<title>RTH Toolbox</title>
		<link href="unpackage/res/icons/512x512.png" rel="apple-touch-icon"/>
		<link href="css/mui.min.css" rel="stylesheet"/>
		<link href="css/home.css" rel="stylesheet"/>
	</head>
	<body>
		<div class="drag"></div>
		<div class="icon">
			<a href="javascript:if(localStorage.getItem('Recent')!=null){OpenWindow(localStorage.getItem('Recent'))}">
				<img src="img/icon.png" width="100px" style="border-radius:25%"/>
			</a>
		</div>
		<div class="title"></div>
		<div class="menu">
			<ul>
				<li onclick="OpenWindow('wordlist')" id="WordList"/>
				<li onclick="OpenWindow('timer')" id="Timer"/>
				<li onclick="OpenWindow('calculator')" id="Calculator"/>
				<li onclick="OpenWindow('chatbot')" id="Chatbot"/>
				<li onclick="OpenWindow('randomnumber')" id="RandomNumber"/>
				<li onclick="OpenWindow('search')" id="Search"/>
				<li onclick="OpenWindow('texteditor')" id="TextEditor"/>
			</ul>
		</div>
		<a class="mui-icon mui-icon-more more" href="javascript:More()"></a>
		<a class="mui-icon mui-icon-settings settings" href="javascript:OpenWindow('settings')"></a>
		<script type="text/javascript">
			var Language=localStorage.getItem("Language"),Menu
			if(Language!="SimplifiedChinese"&&Language!="English"&&window.localStorage){
				if(navigator.language.indexOf("zh")!=-1){
					Language="SimplifiedChinese"
					localStorage.setItem("Language","SimplifiedChinese")
				}else{
					Language="English"
					localStorage.setItem("Language","English")
				}
			}
			if(navigator.userAgent.indexOf("Html5Plus")!=-1){
				var wgtVer=null
				function plusReady(){
					plus.navigator.setStatusBarBackground("#0066CC")
					plus.navigator.setStatusBarStyle("light")
					if(navigator.userAgent.indexOf("Android")!=-1){
						plus.runtime.getProperty(plus.runtime.appid,function(inf){wgtVer=inf.version})
						var xhr=new XMLHttpRequest()
						xhr.onreadystatechange=function(){
							switch(xhr.readyState){
								case 4:
									if(xhr.status==200){
										var newVer=xhr.responseText
										if(wgtVer&&newVer&&(wgtVer!=newVer)){plus.downloader.createDownload("http://t.rths.tk/web/toolbox/update/H58039057.wgt",{filename:"_doc/update/"},function(d,status){if(status==200){plus.runtime.install(d.filename)}}).start()}
									}
									break
								default:break
							}
						}
						xhr.open("GET","http://t.rths.tk/web/toolbox/update/check.php")
						xhr.send()
					}else{
						plus.webview.create("wordlist.html","wordlist",{"popGesture":"hide"})
						plus.webview.create("timer.html","timer",{"popGesture":"hide"})
						plus.webview.create("calculator.html","calculator",{"popGesture":"hide"})
						plus.webview.create("date.html","date",{"popGesture":"hide"})
						plus.webview.create("statistics.html","statistics",{"popGesture":"hide"})
						plus.webview.create("quadraticfunction.html","quadraticfunction",{"popGesture":"hide"})
						plus.webview.create("equation21.html","equation21",{"popGesture":"hide"})
						plus.webview.create("findlinearfunction.html","findlinearfunction",{"popGesture":"hide"})
						plus.webview.create("equation12.html","equation12",{"popGesture":"hide"})
						plus.webview.create("chatbot.html","chatbot",{"popGesture":"hide"})
						plus.webview.create("randomnumber.html","randomnumber",{"popGesture":"hide"})
						plus.webview.create("search.html","search",{"popGesture":"hide"})
						plus.webview.create("texteditor.html","texteditor",{"popGesture":"hide"})
						plus.webview.create("settings.html","settings",{"popGesture":"hide"})
						plus.webview.create("about.html","about",{"popGesture":"hide"})
						if(plus.runtime.launcher=="shortcut"){
							var cmd=JSON.parse(plus.runtime.arguments)
							var type=cmd&&cmd.type
							switch(type){
								case "wordlist":
									plus.webview.show("wordlist","pop-in")
									break
								case "timer":
									plus.webview.show("timer","pop-in")
									break
								case "calculator":
									plus.webview.show("calculator","pop-in")
									break
								case "search":
									plus.webview.show("search","pop-in")
									break
								case "about":
									plus.webview.show("about","pop-in")
									break
								default:break
							}
						}
					}
				}
				if(window.plus){plusReady()}
				else{document.addEventListener("plusready",plusReady,false)}
			}
			if(Language=="SimplifiedChinese"){
				document.title="RTH 工具箱"
				document.getElementsByClassName("title")[0].innerText="工具箱"
				document.getElementById("WordList").innerText="单词表"
				document.getElementById("Timer").innerText="计时器"
				document.getElementById("Calculator").innerText="计算器"
				document.getElementById("Chatbot").innerText="聊天机器人"
				document.getElementById("RandomNumber").innerText="随机抽号"
				document.getElementById("Search").innerText="搜索"
				document.getElementById("TextEditor").innerText="文本编辑器"
			}else{
				document.getElementsByClassName("title")[0].innerText="Toolbox"
				document.getElementById("WordList").innerText="Word List"
				document.getElementById("Timer").innerText="Timer"
				document.getElementById("Calculator").innerText="Calculator"
				document.getElementById("Chatbot").innerText="Chatbot"
				document.getElementById("RandomNumber").innerText="Random Number"
				document.getElementById("Search").innerText="Search"
				document.getElementById("TextEditor").innerText="Text Editor"
			}
			if(!navigator.onLine){document.getElementsByClassName("more")[0].style.display="none"}
			OnResize()
			function OnResize(){
				if(document.documentElement.clientWidth>500){document.getElementsByClassName("title")[0].style.textAlign="left"}
				else{document.getElementsByClassName("title")[0].style.textAlign="center"}
			}
		</script>
		<script src="js/mui.min.js"></script>
		<script src="js/general.js"></script>
		<script type="text/javascript">
			if(navigator.userAgent.indexOf("Html5Plus")!=-1&&navigator.userAgent.indexOf("Android")!=-1){
				mui.init({preloadPages:[
					{url:"wordlist.html",id:"wordlist"},
					{url:"timer.html",id:"timer"},
					{url:"calculator.html",id:"calculator"},
					{url:"date.html",id:"date"},
					{url:"statistics.html",id:"statistics"},
					{url:"quadraticfunction.html",id:"quadraticfunction"},
					{url:"equation21.html",id:"equation21"},
					{url:"findlinearfunction.html",id:"findlinearfunction"},
					{url:"equation12.html",id:"equation12"},
					{url:"chatbot.html",id:"chatbot"},
					{url:"randomnumber.html",id:"randomnumber"},
					{url:"search.html",id:"search"},
					{url:"texteditor.html",id:"texteditor"},
					{url:"settings.html",id:"settings"},
					{url:"about.html",id:"about"}
				],preloadLimit:15,swipeBack:false})
			}else{mui.init({swipeBack:false})}
			window.onresize=OnResize
			if(window.location.href.indexOf("rthsoftware.tk")!=-1||"ActiveXObject" in window){window.location.href="http://rths.tk/"}
			if(navigator.userAgent.indexOf("Electron")!=-1){
				const electron=require("electron")
				electron.webFrame.setZoomLevelLimits(1,1)
				var path=electron.remote.getGlobal("sharedObj").path
				if(path&&window.localStorage){
					localStorage.setItem("WordList",require("fs").readFileSync(path,"utf8"))
					localStorage.setItem("WordListCurrentItem","WordList")
					OpenWindow("wordlist")
				}
			}
			function More(){
				var xhr=new XMLHttpRequest()
				xhr.onreadystatechange=function(){
					switch(xhr.readyState){
						case 4:
							if(xhr.status==200){
								document.getElementsByClassName("more")[0].style.display="none"
								Menu=document.getElementsByClassName("menu")[0].innerHTML
								document.getElementsByClassName("menu")[0].innerHTML=xhr.responseText
							}
							break
						default:break
					}
				}
				xhr.open("GET","http://t.rths.tk/web/toolbox/more_"+Language+".html")
				xhr.send()
			}
			function Back(){
				document.getElementsByClassName("menu")[0].innerHTML=Menu
				document.getElementsByClassName("more")[0].style.display=""
			}
		</script>
	</body>
</html>