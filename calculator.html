<!DOCTYPE html>
<html>
	<head>
		<!--Code written by Shangzhen Yang-->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,viewport-fit=cover">
		<meta name="theme-color" content="#0066cc">
		<link href="css/mui.min.css" rel="stylesheet">
		<link href="css/general.css" rel="stylesheet">
		<style>
			ul.menu{
				margin-top:15px;
			}
			.calc-table{
				background-color:white;
				width:100%;
			}
			.calc-table td{
				border:1px solid #ccc;
				height:50px;
				padding:0px;
				width:25%;
			}
			.function{
				border-radius:0px;
				height:350px;
				margin:12px 0px -2px 0px;
				overflow:auto;
				padding:0px;
				width:100%;
			}
			.function li{
				border-style:none;
				height:40px;
				padding:0px 10px;
			}
			.function ul.menu{
				border-style:none;
				margin-top:0px;
			}
			.mui-btn{
				border-radius:0px;
				border-style:none;
				height:100%;
				width:100%;
			}
			#FuncTd{
				border-style:none;
				width:25%;
			}
			#KeyTd{
				border-style:none;
				padding-right:5px;
				width:75%;
			}
		</style>
	</head>
	<body>
		<header class="mui-bar mui-bar-nav title"></header>
		<div class="mui-content">
			<div class="mui-input-row">
				<input type="text" class="mui-input-clear">
			</div>
			<div class="calc-table">
				<table class="calc-table width-limit">
					<tbody>
						<tr>
							<td id="FuncTd">
								<div class="function">
									<ul class="menu">
										<li class="menu">abs()</li>
										<li class="menu">arc</li>
										<li class="menu">cbrt()</li>
										<li class="menu">ceil()</li>
										<li class="menu">cos()</li>
										<li class="menu">cosh()</li>
										<li class="menu">cot()</li>
										<li class="menu">csc()</li>
										<li class="menu">e</li>
										<li class="menu">exp()</li>
										<li class="menu">floor()</li>
										<li class="menu">ln()</li>
										<li class="menu">log10()</li>
										<li class="menu">log2()</li>
										<li class="menu">π</li>
										<li class="menu">pow()</li>
										<li class="menu">random()</li>
										<li class="menu">round()</li>
										<li class="menu">sec()</li>
										<li class="menu">sin()</li>
										<li class="menu">sinh()</li>
										<li class="menu">sqrt()</li>
										<li class="menu">tan()</li>
										<li class="menu">tanh()</li>
										<li class="menu">trunc()</li>
										<li class="menu">y</li>
										<li class="menu">z</li>
										<li class="menu">(π/180)</li>
									</ul>
								</div>
							</td>
							<td id="KeyTd">
								<table class="calc-table">
									<tbody>
										<tr>
											<td>
												<button id="C" type="button" class="mui-btn">C</button>
											</td>
											<td>
												<button type="button" class="mui-btn">,</button>
											</td>
											<td>
												<button id="Backspace" type="button" class="mui-btn">←</button>
											</td>
										</tr>
										<tr>
											<td>
												<button type="button" class="mui-btn">7</button>
											</td>
											<td>
												<button type="button" class="mui-btn">8</button>
											</td>
											<td>
												<button type="button" class="mui-btn">9</button>
											</td>
										</tr>
										<tr>
											<td>
												<button type="button" class="mui-btn">4</button>
											</td>
											<td>
												<button type="button" class="mui-btn">5</button>
											</td>
											<td>
												<button type="button" class="mui-btn">6</button>
											</td>
										</tr>
										<tr>
											<td>
												<button type="button" class="mui-btn">1</button>
											</td>
											<td>
												<button type="button" class="mui-btn">2</button>
											</td>
											<td>
												<button type="button" class="mui-btn">3</button>
											</td>
										</tr>
										<tr>
											<td>
												<button type="button" class="mui-btn">0</button>
											</td>
											<td>
												<button type="button" class="mui-btn">.</button>
											</td>
											<td>
												<button type="button" class="mui-btn">-</button>
											</td>
										</tr>
										<tr>
											<td>
												<button type="button" class="mui-btn">×</button>
											</td>
											<td>
												<button type="button" class="mui-btn">÷</button>
											</td>
											<td>
												<button type="button" class="mui-btn">+</button>
											</td>
										</tr>
										<tr>
											<td>
												<button type="button" class="mui-btn">(</button>
											</td>
											<td>
												<button type="button" class="mui-btn">)</button>
											</td>
											<td>
												<button id="Equal" type="button" class="mui-btn">=</button>
											</td>
										</tr>
									</tbody>
								</table>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
			<ul class="menu">
				<li id="Date" class="menu"></li>
				<li id="Statistics" class="menu"></li>
			</ul>
			<ul class="menu">
				<li id="CurrencyConversion" class="menu"></li>
				<li id="NumberBaseConversion" class="menu"></li>
				<li id="MoleConversion" class="menu"></li>
			</ul>
			<ul class="menu">
				<li id="QuadraticEquationOneUnknown" class="menu"></li>
				<li id="SystemLinearEquations2Unknowns" class="menu"></li>
				<li id="SystemLinearEquations3Unknowns" class="menu"></li>
				<li id="QuadraticFunction" class="menu"></li>
				<li id="FindLinearFunction" class="menu"></li>
				<li id="FindQuadraticFunction" class="menu"></li>
			</ul>
		</div>
		<script src="cordova.js"></script>
		<script src="js/mui.min.js"></script>
		<script src="js/jquery.min.js"></script>
		<script src="js/general.js"></script>
		<script type="text/javascript">
			var calcBtn=document.getElementsByTagName("button"),
			functionList=document.getElementsByClassName("function")[0].getElementsByTagName("ul")[0].getElementsByTagName("li")
			function calculate(){
				var formula=document.getElementsByTagName("input")[0].value.replace(/coin|cordova|eval|require/gi,"").replace(/×/g,"*").replace(/÷/g,"/").replace(/π/g,"pi").toLowerCase()
				if(formula==""){
					showAlert([
						"Please enter the formula",
						"请输入算式"
					])
				}else{
					if(/x|y|z/.test(formula)&&formula.indexOf("=")==-1&&formula.indexOf("exp")==-1){
						document.getElementsByTagName("input")[0].value+=" == "
					}else{
						if(formula.indexOf(" = ")!=-1){
							formula=formula.split(" = ")[0]
						}
						if(formula.indexOf("=")!=-1&&formula.indexOf("==")==-1){
							formula=formula.replace("=","==")
						}
						try{
							document.getElementsByTagName("input")[0].value=formula+" = "+calc(formula)
						}catch(e){
							if(document.getElementsByTagName("input")[0].value.indexOf("()")==-1&&e.message.indexOf(")")!=-1){
								document.getElementsByTagName("input")[0].value+=")"
								calculate()
							}else{
								mui.toast(e.message)
							}
						}
					}
				}
			}
			document.getElementsByTagName("input")[0].onkeydown=function(e){
				if(e.keyCode==13&&this.value!=""){
					calculate()
				}
			}
			document.getElementById("C").onclick=function(){
				document.getElementsByTagName("input")[0].value=""
			}
			document.getElementById("Backspace").onclick=function(){
				var value=document.getElementsByTagName("input")[0].value
				document.getElementsByTagName("input")[0].value=value.substr(0,value.length-1)
			}
			document.getElementById("Equal").onclick=calculate
			document.getElementById("Date").onclick=function(){
				openWindow("date")
			}
			document.getElementById("Statistics").onclick=function(){
				openWindow("statistics")
			}
			document.getElementById("CurrencyConversion").onclick=function(){
				openWindow("currency")
			}
			document.getElementById("NumberBaseConversion").onclick=function(){
				openWindow("numberbase")
			}
			document.getElementById("MoleConversion").onclick=function(){
				openWindow("mole")
			}
			document.getElementById("QuadraticEquationOneUnknown").onclick=function(){
				openWindow("equation12")
			}
			document.getElementById("SystemLinearEquations2Unknowns").onclick=function(){
				openWindow("equation21")
			}
			document.getElementById("SystemLinearEquations3Unknowns").onclick=function(){
				openWindow("equation31")
			}
			document.getElementById("QuadraticFunction").onclick=function(){
				openWindow("quadraticfunction")
			}
			document.getElementById("FindLinearFunction").onclick=function(){
				openWindow("findlinearfunction")
			}
			document.getElementById("FindQuadraticFunction").onclick=function(){
				openWindow("findquadraticfunction")
			}
			switch(language){
				case "SimplifiedChinese":
				document.title="计算器"
				document.getElementsByTagName("input")[0].placeholder="输入算式"
				document.getElementById("Date").innerText="日期"
				document.getElementById("Statistics").innerText="统计"
				document.getElementById("CurrencyConversion").innerText="货币换算"
				document.getElementById("NumberBaseConversion").innerText="进制换算"
				document.getElementById("MoleConversion").innerText="摩尔换算"
				document.getElementById("QuadraticEquationOneUnknown").innerText="一元二次方程"
				document.getElementById("SystemLinearEquations2Unknowns").innerText="二元一次方程组"
				document.getElementById("SystemLinearEquations3Unknowns").innerText="三元一次方程组"
				document.getElementById("QuadraticFunction").innerText="二次函数"
				document.getElementById("FindLinearFunction").innerText="求一次函数解析式"
				document.getElementById("FindQuadraticFunction").innerText="求二次函数解析式"
				break
				default:
				document.title="Calculator"
				document.getElementsByTagName("input")[0].placeholder="Enter the formula"
				document.getElementById("Date").innerText="Date"
				document.getElementById("Statistics").innerText="Statistics"
				document.getElementById("CurrencyConversion").innerText="Currency Conversion"
				document.getElementById("NumberBaseConversion").innerText="Number Base Conversion"
				document.getElementById("MoleConversion").innerText="Mole Conversion"
				document.getElementById("QuadraticEquationOneUnknown").innerText="Quadratic Equation in One Unknown"
				document.getElementById("SystemLinearEquations2Unknowns").innerText="System of Linear Equations in 2 Unknowns"
				document.getElementById("SystemLinearEquations3Unknowns").innerText="System of Linear Equations in 3 Unknowns"
				document.getElementById("QuadraticFunction").innerText="Quadratic Function"
				document.getElementById("FindLinearFunction").innerText="Find Analytic Formula of Linear Function"
				document.getElementById("FindQuadraticFunction").innerText="Find Analytic Formula of Quadratic Function"
				break
			}
			for(var i=0;i<calcBtn.length;i++){
				if(calcBtn[i].onclick==null){
					calcBtn[i].onclick=function(){
						var btnText=this.innerText
						if(btnText=="×"){
							var value=document.getElementsByTagName("input")[0].value
							var last=value.substr(value.length-1,value.length)
							if(last=="("||last=="*"||last=="-"||value==""){
								btnText="x"
							}else{
								btnText="*"
							}
						}else if(btnText=="÷"){
							btnText="/"
						}
						document.getElementsByTagName("input")[0].value+=btnText
					}
				}
			}
			for(var i=0;i<functionList.length;i++){
				functionList[i].onclick=function(){
					document.getElementsByTagName("input")[0].value+=this.innerText.replace("()","(").replace("π","pi")
				}
			}
			document.getElementsByClassName("mui-title")[0].innerText=document.title
			if(!isMobile){
				document.getElementsByTagName("input")[0].focus()
			}
		</script>
	</body>
</html>
