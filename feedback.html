<!DOCTYPE html>
<html>
	<head>
		<!--Code written by Shangzhen Yang-->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,viewport-fit=cover">
		<meta name="theme-color" content="#0066cc">
		<link href="css/mui.min.css" rel="stylesheet">
		<link href="css/general.css" rel="stylesheet">
	</head>
	<body>
		<header class="mui-bar mui-bar-nav title"></header>
		<div class="mui-content">
			<div class="mui-input-row">
				<input id="Name" type="text" class="mui-input-clear">
			</div>
			<div class="mui-input-row">
				<input id="Email" type="email" class="mui-input-clear">
			</div>
			<textarea rows="10"></textarea>
			<div class="btn-bg-img">
				<button type="button" class="mui-btn mui-btn-blue mui-btn-block"></button>
			</div>
		</div>
		<script src="cordova.js"></script>
		<script src="js/mui.min.js"></script>
		<script src="js/jquery.min.js"></script>
		<script src="js/general.js"></script>
		<script type="text/javascript">
			document.getElementsByTagName("button")[0].onclick=function(){
				document.getElementById("Name").style.background=""
				document.getElementById("Email").style.background=""
				document.getElementsByTagName("textarea")[0].style.background=""
				if(document.getElementById("Name").value==""){
					document.getElementById("Name").style.background="rgb(255,192,203)"
				}else if(!/\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14}/.test(document.getElementById("Email").value)){
					document.getElementById("Email").style.background="rgb(255,192,203)"
				}else if(document.getElementsByTagName("textarea")[0].value==""){
					document.getElementsByTagName("textarea")[0].style.background="rgb(255,192,203)"
				}else{
					switch(language){
						case "SimplifiedChinese":
						mui.toast("正在发送")
						break
						default:
						mui.toast("Sending")
						break
					}
					$.post("https://rthsoftware.azurewebsites.net/feedback.php",{
						"email":document.getElementById("Email").value,
						"name":document.getElementById("Name").value,
						"text":document.getElementsByTagName("textarea")[0].value,
						"ver":ver
					},function(){
						showAlert([
							"Thank you for your feedback",
							"感谢您的反馈"
						])
					})
				}
			}
			switch(language){
				case "SimplifiedChinese":
				document.title="反馈"
				document.getElementById("Name").placeholder="名字"
				document.getElementById("Email").placeholder="电子邮箱"
				document.getElementsByTagName("textarea")[0].placeholder="正文"
				document.getElementsByTagName("button")[0].innerText="发送"
				break
				default:
				document.title="Feedback"
				document.getElementById("Name").placeholder="Name"
				document.getElementById("Email").placeholder="Email"
				document.getElementsByTagName("textarea")[0].placeholder="Text"
				document.getElementsByTagName("button")[0].innerText="Send"
				break
			}
			document.getElementsByClassName("mui-title")[0].innerText=document.title
			document.getElementById("Email").value=localStorage.getItem("Email")
		</script>
	</body>
</html>
