<!DOCTYPE html>
<html>
	<head>
		<!--Code written by Shangzhen Yang-->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,viewport-fit=cover">
		<meta name="theme-color" content="#0066cc">
		<link href="css/mui.min.css" rel="stylesheet">
		<link href="css/general.css" rel="stylesheet">
	</head>
	<body>
		<header class="mui-bar mui-bar-nav title"></header>
		<div class="mui-content">
			<table style="width:100%">
				<tbody>
					<tr>
						<td width="30%">
							<div id="Language"></div>
						</td>
						<td width="70%">
							<select id="LanguageSelect">
								<option value="SimplifiedChinese">简体中文</option>
								<option value="English">English</option>
							</select>
						</td>
					</tr>
					<tr>
						<td width="30%">
							<div id="Theme"></div>
						</td>
						<td width="70%">
							<select id="ThemeSelect"></select>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<footer>
			<div id="About" style="width:100%"></div>
		</footer>
		<script src="cordova.js"></script>
		<script src="js/mui.min.js"></script>
		<script src="js/general.js"></script>
		<script type="text/javascript">
			function settingsChanged(){
				showAlert([
					"RTH Toolbox needs to be restarted",
					"需要重新启动 RTH 工具箱"
				],[
					"Applied",
					"已应用"
				],restart)
			}
			document.getElementById("LanguageSelect").onchange=function(){
				if(this.value!=language){
					localStorage.setItem("Language",document.getElementById("LanguageSelect").value)
					settingsChanged()
				}
			}
			document.getElementById("ThemeSelect").onchange=function(){
				if(this.value!=theme){
					localStorage.setItem("Theme",document.getElementById("ThemeSelect").value)
					settingsChanged()
				}
			}
			document.getElementById("About").onclick=function(){
				openWindow("about")
			}
			switch(language){
				case "SimplifiedChinese":
					document.title="设置"
					document.getElementById("Language").innerText="语言"
					document.getElementById("Theme").innerText="主题"
					document.getElementById("ThemeSelect").options.add(new Option("自动","Automatic"))
					document.getElementById("ThemeSelect").options.add(new Option("浅色","Light"))
					document.getElementById("ThemeSelect").options.add(new Option("深色","Dark"))
					document.getElementById("About").innerText="关于 RTH 工具箱"
					break
				default:
					document.title="Settings"
					document.getElementById("Language").innerText="Language"
					document.getElementById("Theme").innerText="Theme"
					document.getElementById("ThemeSelect").options.add(new Option("Automatic","Automatic"))
					document.getElementById("ThemeSelect").options.add(new Option("Light","Light"))
					document.getElementById("ThemeSelect").options.add(new Option("Dark","Dark"))
					document.getElementById("About").innerText="About RTH Toolbox"
					break
			}
			document.getElementsByClassName("mui-title")[0].innerText=document.title
			document.getElementById("LanguageSelect").value=language
			document.getElementById("ThemeSelect").value=theme
		</script>
	</body>
</html>
